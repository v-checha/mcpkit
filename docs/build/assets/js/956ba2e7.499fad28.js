"use strict";(globalThis.webpackChunkmcpkit_docs=globalThis.webpackChunkmcpkit_docs||[]).push([[536],{3286(n,e,r){r.r(e),r.d(e,{assets:()=>c,contentTitle:()=>t,default:()=>d,frontMatter:()=>a,metadata:()=>i,toc:()=>l});const i=JSON.parse('{"id":"guides/configuration","title":"Configuration & Arguments","description":"Learn how to configure your MCP server using command-line arguments and environment variables from the client configuration.","source":"@site/docs/guides/configuration.md","sourceDirName":"guides","slug":"/guides/configuration","permalink":"/mcpkit/docs/guides/configuration","draft":false,"unlisted":false,"editUrl":"https://github.com/v-checha/mcpkit/tree/main/docs/docs/guides/configuration.md","tags":[],"version":"current","sidebarPosition":5,"frontMatter":{"sidebar_position":5}}');var s=r(4848),o=r(8453);const a={sidebar_position:5},t="Configuration & Arguments",c={},l=[{value:"How Configuration Works",id:"how-configuration-works",level:2},{value:"Parsing Command-Line Arguments",id:"parsing-command-line-arguments",level:2},{value:"Simple Manual Parsing",id:"simple-manual-parsing",level:3},{value:"Using Constructor Parameters",id:"using-constructor-parameters",level:3},{value:"Using Commander.js",id:"using-commanderjs",level:3},{value:"Environment Variables",id:"environment-variables",level:2},{value:"Client Configuration",id:"client-configuration",level:3},{value:"Server Implementation",id:"server-implementation",level:3},{value:"Combining Arguments and Environment Variables",id:"combining-arguments-and-environment-variables",level:2},{value:"Configuration with Validation",id:"configuration-with-validation",level:2},{value:"Security Best Practices",id:"security-best-practices",level:2}];function g(n){const e={code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,o.R)(),...n.components};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(e.header,{children:(0,s.jsx)(e.h1,{id:"configuration--arguments",children:"Configuration & Arguments"})}),"\n",(0,s.jsx)(e.p,{children:"Learn how to configure your MCP server using command-line arguments and environment variables from the client configuration."}),"\n",(0,s.jsx)(e.h2,{id:"how-configuration-works",children:"How Configuration Works"}),"\n",(0,s.jsx)(e.p,{children:"When you configure an MCP server in Claude Desktop (or other MCP clients), you can pass arguments and environment variables:"}),"\n",(0,s.jsx)(e.pre,{children:(0,s.jsx)(e.code,{className:"language-json",children:'{\n  "mcpServers": {\n    "my-server": {\n      "command": "node",\n      "args": ["/path/to/server.js", "--api-key", "secret123", "--debug"],\n      "env": {\n        "DATABASE_URL": "postgresql://localhost/mydb",\n        "LOG_LEVEL": "debug"\n      }\n    }\n  }\n}\n'})}),"\n",(0,s.jsx)(e.p,{children:"Your server receives:"}),"\n",(0,s.jsxs)(e.ul,{children:["\n",(0,s.jsxs)(e.li,{children:["Command-line arguments via ",(0,s.jsx)(e.code,{children:"process.argv"})]}),"\n",(0,s.jsxs)(e.li,{children:["Environment variables via ",(0,s.jsx)(e.code,{children:"process.env"})]}),"\n"]}),"\n",(0,s.jsx)(e.h2,{id:"parsing-command-line-arguments",children:"Parsing Command-Line Arguments"}),"\n",(0,s.jsx)(e.h3,{id:"simple-manual-parsing",children:"Simple Manual Parsing"}),"\n",(0,s.jsx)(e.pre,{children:(0,s.jsx)(e.code,{className:"language-typescript",children:"import 'reflect-metadata';\nimport { createServer, MCPServer, Tool, Param } from '@mcpkit-dev/core';\n\nfunction parseArgs() {\n  const args = process.argv.slice(2);\n  const config: Record<string, string | boolean> = {};\n\n  for (let i = 0; i < args.length; i++) {\n    const arg = args[i];\n    if (arg.startsWith('--')) {\n      const key = arg.slice(2);\n      const nextArg = args[i + 1];\n      if (nextArg && !nextArg.startsWith('--')) {\n        config[key] = nextArg;\n        i++;\n      } else {\n        config[key] = true;\n      }\n    }\n  }\n  return config;\n}\n\nconst config = parseArgs();\n\n@MCPServer({\n  name: 'my-server',\n  version: '1.0.0',\n})\nclass MyServer {\n  private apiKey = config['api-key'] as string;\n\n  @Tool({ description: 'Call external API' })\n  async callApi(@Param({ name: 'query' }) query: string) {\n    return `Called API with key: ${this.apiKey ? '***' : 'none'}`;\n  }\n}\n\nconst server = createServer(MyServer);\nawait server.listen();\n"})}),"\n",(0,s.jsx)(e.h3,{id:"using-constructor-parameters",children:"Using Constructor Parameters"}),"\n",(0,s.jsx)(e.p,{children:"For better encapsulation, pass configuration through the constructor:"}),"\n",(0,s.jsx)(e.pre,{children:(0,s.jsx)(e.code,{className:"language-typescript",children:"import 'reflect-metadata';\nimport { createServer, MCPServer, Tool, Param } from '@mcpkit-dev/core';\n\ninterface ServerConfig {\n  apiKey: string;\n  debug: boolean;\n  baseUrl?: string;\n}\n\n@MCPServer({\n  name: 'my-server',\n  version: '1.0.0',\n})\nclass MyServer {\n  constructor(private config: ServerConfig) {\n    if (config.debug) {\n      console.error('[DEBUG] Server initialized with config');\n    }\n  }\n\n  @Tool({ description: 'Fetch data from API' })\n  async fetchData(@Param({ name: 'endpoint' }) endpoint: string) {\n    const url = `${this.config.baseUrl ?? 'https://api.example.com'}/${endpoint}`;\n    // Use this.config.apiKey for authentication\n    return { url, authenticated: !!this.config.apiKey };\n  }\n\n  @Tool({ description: 'Get current config (redacted)' })\n  async getConfig() {\n    return {\n      apiKey: this.config.apiKey ? '***' : 'not set',\n      debug: this.config.debug,\n      baseUrl: this.config.baseUrl ?? 'default',\n    };\n  }\n}\n\n// Parse arguments\nconst args = process.argv.slice(2);\nconst config: ServerConfig = {\n  apiKey: '',\n  debug: false,\n};\n\nfor (let i = 0; i < args.length; i++) {\n  switch (args[i]) {\n    case '--api-key':\n      config.apiKey = args[++i];\n      break;\n    case '--debug':\n      config.debug = true;\n      break;\n    case '--base-url':\n      config.baseUrl = args[++i];\n      break;\n  }\n}\n\n// Pass config to createServer\nconst server = createServer(MyServer, config);\nawait server.listen();\n"})}),"\n",(0,s.jsx)(e.h3,{id:"using-commanderjs",children:"Using Commander.js"}),"\n",(0,s.jsx)(e.p,{children:"For more complex argument parsing, use a library like Commander:"}),"\n",(0,s.jsx)(e.pre,{children:(0,s.jsx)(e.code,{className:"language-bash",children:"npm install commander\n"})}),"\n",(0,s.jsx)(e.pre,{children:(0,s.jsx)(e.code,{className:"language-typescript",children:"import 'reflect-metadata';\nimport { createServer, MCPServer, Tool, Param } from '@mcpkit-dev/core';\nimport { program } from 'commander';\n\nprogram\n  .option('--api-key <key>', 'API key for external service')\n  .option('--debug', 'Enable debug mode', false)\n  .option('--base-url <url>', 'Base URL for API', 'https://api.example.com')\n  .option('--timeout <ms>', 'Request timeout in milliseconds', '5000')\n  .parse();\n\nconst options = program.opts();\n\n@MCPServer({\n  name: 'my-server',\n  version: '1.0.0',\n})\nclass MyServer {\n  @Tool({ description: 'Check server configuration' })\n  async checkConfig() {\n    return {\n      debug: options.debug,\n      baseUrl: options.baseUrl,\n      timeout: parseInt(options.timeout),\n      hasApiKey: !!options.apiKey,\n    };\n  }\n}\n\nconst server = createServer(MyServer);\nawait server.listen();\n"})}),"\n",(0,s.jsx)(e.h2,{id:"environment-variables",children:"Environment Variables"}),"\n",(0,s.jsx)(e.p,{children:"Environment variables are often preferred for secrets since they don't appear in process listings."}),"\n",(0,s.jsx)(e.h3,{id:"client-configuration",children:"Client Configuration"}),"\n",(0,s.jsx)(e.pre,{children:(0,s.jsx)(e.code,{className:"language-json",children:'{\n  "mcpServers": {\n    "my-server": {\n      "command": "node",\n      "args": ["/path/to/server.js"],\n      "env": {\n        "API_KEY": "secret123",\n        "DATABASE_URL": "postgresql://localhost/mydb",\n        "DEBUG": "true",\n        "LOG_LEVEL": "info"\n      }\n    }\n  }\n}\n'})}),"\n",(0,s.jsx)(e.h3,{id:"server-implementation",children:"Server Implementation"}),"\n",(0,s.jsx)(e.pre,{children:(0,s.jsx)(e.code,{className:"language-typescript",children:"import 'reflect-metadata';\nimport { createServer, MCPServer, Tool, Param } from '@mcpkit-dev/core';\n\ninterface Config {\n  apiKey: string;\n  databaseUrl: string;\n  debug: boolean;\n  logLevel: 'debug' | 'info' | 'warn' | 'error';\n}\n\nfunction loadConfig(): Config {\n  return {\n    apiKey: process.env.API_KEY ?? '',\n    databaseUrl: process.env.DATABASE_URL ?? '',\n    debug: process.env.DEBUG === 'true',\n    logLevel: (process.env.LOG_LEVEL as Config['logLevel']) ?? 'info',\n  };\n}\n\nconst config = loadConfig();\n\n// Validate required config\nif (!config.apiKey) {\n  console.error('ERROR: API_KEY environment variable is required');\n  process.exit(1);\n}\n\n@MCPServer({\n  name: 'my-server',\n  version: '1.0.0',\n})\nclass MyServer {\n  @Tool({ description: 'Query the database' })\n  async queryDatabase(@Param({ name: 'query' }) query: string) {\n    if (config.debug) {\n      console.error(`[DEBUG] Executing query: ${query}`);\n    }\n    // Use config.databaseUrl to connect\n    return { success: true, query };\n  }\n}\n\nconst server = createServer(MyServer);\nawait server.listen();\n"})}),"\n",(0,s.jsx)(e.h2,{id:"combining-arguments-and-environment-variables",children:"Combining Arguments and Environment Variables"}),"\n",(0,s.jsx)(e.p,{children:"A common pattern is to use environment variables as defaults that can be overridden by command-line arguments:"}),"\n",(0,s.jsx)(e.pre,{children:(0,s.jsx)(e.code,{className:"language-typescript",children:"import 'reflect-metadata';\nimport { createServer, MCPServer, Tool } from '@mcpkit-dev/core';\n\ninterface Config {\n  apiKey: string;\n  baseUrl: string;\n  debug: boolean;\n  maxRetries: number;\n}\n\nfunction loadConfig(): Config {\n  const args = process.argv.slice(2);\n\n  // Start with environment variables as defaults\n  const config: Config = {\n    apiKey: process.env.API_KEY ?? '',\n    baseUrl: process.env.BASE_URL ?? 'https://api.example.com',\n    debug: process.env.DEBUG === 'true',\n    maxRetries: parseInt(process.env.MAX_RETRIES ?? '3'),\n  };\n\n  // Override with command-line arguments\n  for (let i = 0; i < args.length; i++) {\n    switch (args[i]) {\n      case '--api-key':\n        config.apiKey = args[++i];\n        break;\n      case '--base-url':\n        config.baseUrl = args[++i];\n        break;\n      case '--debug':\n        config.debug = true;\n        break;\n      case '--max-retries':\n        config.maxRetries = parseInt(args[++i]);\n        break;\n    }\n  }\n\n  return config;\n}\n\nconst config = loadConfig();\n\n@MCPServer({\n  name: 'my-server',\n  version: '1.0.0',\n})\nclass MyServer {\n  @Tool({ description: 'Show current configuration' })\n  async showConfig() {\n    return {\n      baseUrl: config.baseUrl,\n      debug: config.debug,\n      maxRetries: config.maxRetries,\n      hasApiKey: !!config.apiKey,\n    };\n  }\n}\n\nconst server = createServer(MyServer);\nawait server.listen();\n"})}),"\n",(0,s.jsx)(e.h2,{id:"configuration-with-validation",children:"Configuration with Validation"}),"\n",(0,s.jsx)(e.p,{children:"Use Zod to validate your configuration:"}),"\n",(0,s.jsx)(e.pre,{children:(0,s.jsx)(e.code,{className:"language-typescript",children:"import 'reflect-metadata';\nimport { createServer, MCPServer, Tool } from '@mcpkit-dev/core';\nimport { z } from 'zod';\n\nconst ConfigSchema = z.object({\n  apiKey: z.string().min(1, 'API_KEY is required'),\n  baseUrl: z.string().url().default('https://api.example.com'),\n  debug: z.boolean().default(false),\n  maxRetries: z.number().int().min(0).max(10).default(3),\n  timeout: z.number().int().min(1000).max(30000).default(5000),\n});\n\ntype Config = z.infer<typeof ConfigSchema>;\n\nfunction loadConfig(): Config {\n  const raw = {\n    apiKey: process.env.API_KEY,\n    baseUrl: process.env.BASE_URL,\n    debug: process.env.DEBUG === 'true',\n    maxRetries: process.env.MAX_RETRIES ? parseInt(process.env.MAX_RETRIES) : undefined,\n    timeout: process.env.TIMEOUT ? parseInt(process.env.TIMEOUT) : undefined,\n  };\n\n  const result = ConfigSchema.safeParse(raw);\n\n  if (!result.success) {\n    console.error('Configuration error:');\n    result.error.issues.forEach(issue => {\n      console.error(`  - ${issue.path.join('.')}: ${issue.message}`);\n    });\n    process.exit(1);\n  }\n\n  return result.data;\n}\n\nconst config = loadConfig();\n\n@MCPServer({\n  name: 'my-server',\n  version: '1.0.0',\n})\nclass MyServer {\n  @Tool({ description: 'Get API status' })\n  async getStatus() {\n    return { configured: true, baseUrl: config.baseUrl };\n  }\n}\n\nconst server = createServer(MyServer);\nawait server.listen();\n"})}),"\n",(0,s.jsx)(e.h2,{id:"security-best-practices",children:"Security Best Practices"}),"\n",(0,s.jsxs)(e.ol,{children:["\n",(0,s.jsxs)(e.li,{children:[(0,s.jsx)(e.strong,{children:"Use environment variables for secrets"})," - They don't appear in ",(0,s.jsx)(e.code,{children:"ps"})," output"]}),"\n",(0,s.jsxs)(e.li,{children:[(0,s.jsx)(e.strong,{children:"Never log sensitive values"})," - Redact API keys in logs"]}),"\n",(0,s.jsxs)(e.li,{children:[(0,s.jsx)(e.strong,{children:"Validate configuration on startup"})," - Fail fast with clear error messages"]}),"\n",(0,s.jsxs)(e.li,{children:[(0,s.jsx)(e.strong,{children:"Use default values wisely"})," - Don't default sensitive values"]}),"\n",(0,s.jsxs)(e.li,{children:[(0,s.jsx)(e.strong,{children:"Document required configuration"})," - Help users configure correctly"]}),"\n"]}),"\n",(0,s.jsx)(e.pre,{children:(0,s.jsx)(e.code,{className:"language-typescript",children:'// Good: Validate and fail fast\nif (!config.apiKey) {\n  console.error(\'ERROR: API_KEY is required. Set it in your MCP client config:\');\n  console.error(\'  "env": { "API_KEY": "your-key-here" }\');\n  process.exit(1);\n}\n\n// Good: Redact in logs\nconsole.error(`Connecting with API key: ${config.apiKey.slice(0, 4)}***`);\n\n// Bad: Never do this\nconsole.error(`API key: ${config.apiKey}`);\n'})})]})}function d(n={}){const{wrapper:e}={...(0,o.R)(),...n.components};return e?(0,s.jsx)(e,{...n,children:(0,s.jsx)(g,{...n})}):g(n)}},8453(n,e,r){r.d(e,{R:()=>a,x:()=>t});var i=r(6540);const s={},o=i.createContext(s);function a(n){const e=i.useContext(o);return i.useMemo(function(){return"function"==typeof n?n(e):{...e,...n}},[e,n])}function t(n){let e;return e=n.disableParentContext?"function"==typeof n.components?n.components(s):n.components||s:a(n.components),i.createElement(o.Provider,{value:e},n.children)}}}]);