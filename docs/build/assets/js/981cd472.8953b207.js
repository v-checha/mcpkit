"use strict";(globalThis.webpackChunkmcpkit_docs=globalThis.webpackChunkmcpkit_docs||[]).push([[43],{3659(e,n,t){t.r(n),t.d(n,{assets:()=>c,contentTitle:()=>s,default:()=>l,frontMatter:()=>o,metadata:()=>r,toc:()=>d});const r=JSON.parse('{"id":"advanced/authentication","title":"Authentication","description":"MCPKit provides built-in authentication middleware for HTTP transports.","source":"@site/docs/advanced/authentication.md","sourceDirName":"advanced","slug":"/advanced/authentication","permalink":"/mcpkit/docs/advanced/authentication","draft":false,"unlisted":false,"editUrl":"https://github.com/v-checha/mcpkit/tree/main/docs/docs/advanced/authentication.md","tags":[],"version":"current","sidebarPosition":2,"frontMatter":{"sidebar_position":2},"sidebar":"tutorialSidebar","previous":{"title":"Middleware Utilities","permalink":"/mcpkit/docs/advanced/middleware-utilities"},"next":{"title":"Rate Limiting","permalink":"/mcpkit/docs/advanced/rate-limiting"}}');var i=t(4848),a=t(8453);const o={sidebar_position:2},s="Authentication",c={},d=[{value:"API Key Authentication",id:"api-key-authentication",level:2},{value:"JWT Authentication",id:"jwt-authentication",level:2},{value:"Bearer Token (OAuth)",id:"bearer-token-oauth",level:2},{value:"@RequireAuth Decorator",id:"requireauth-decorator",level:2}];function u(e){const n={admonition:"admonition",code:"code",h1:"h1",h2:"h2",header:"header",p:"p",pre:"pre",strong:"strong",...(0,a.R)(),...e.components};return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(n.header,{children:(0,i.jsx)(n.h1,{id:"authentication",children:"Authentication"})}),"\n",(0,i.jsx)(n.p,{children:"MCPKit provides built-in authentication middleware for HTTP transports."}),"\n",(0,i.jsxs)(n.admonition,{title:"HTTP Transport Only",type:"caution",children:[(0,i.jsxs)(n.p,{children:["Authentication middleware (",(0,i.jsx)(n.code,{children:"apiKeyAuth"}),", ",(0,i.jsx)(n.code,{children:"jwtAuth"}),", ",(0,i.jsx)(n.code,{children:"bearerAuth"}),") ",(0,i.jsx)(n.strong,{children:"only works with HTTP transports"})," (",(0,i.jsx)(n.code,{children:"streamable-http"}),", ",(0,i.jsx)(n.code,{children:"sse"}),"). It does ",(0,i.jsx)(n.strong,{children:"not"})," work with ",(0,i.jsx)(n.code,{children:"stdio"})," transport (the default)."]}),(0,i.jsxs)(n.p,{children:["For stdio transport, the ",(0,i.jsx)(n.code,{children:"@RequireAuth"})," decorator still works but requires you to set auth context manually via hooks."]})]}),"\n",(0,i.jsx)(n.h2,{id:"api-key-authentication",children:"API Key Authentication"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-typescript",children:"import { apiKeyAuth } from '@mcpkit-dev/core';\n\n@MCPServer({\n  name: 'api-server',\n  version: '1.0.0',\n  middleware: [\n    apiKeyAuth({\n      header: 'X-API-Key',\n      validate: async (key) => {\n        const user = await db.findUserByApiKey(key);\n        return user ? { userId: user.id, roles: user.roles } : null;\n      },\n    }),\n  ],\n})\nclass ApiServer {}\n"})}),"\n",(0,i.jsx)(n.h2,{id:"jwt-authentication",children:"JWT Authentication"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-typescript",children:"import { jwtAuth, createJwt } from '@mcpkit-dev/core';\n\n// Create a JWT\nconst token = createJwt(\n  { userId: '123', roles: ['admin'] },\n  process.env.JWT_SECRET!,\n  { expiresIn: '1h' }\n);\n\n// Validate JWTs\n@MCPServer({\n  name: 'jwt-server',\n  version: '1.0.0',\n  middleware: [\n    jwtAuth({\n      secret: process.env.JWT_SECRET!,\n      issuer: 'my-app',\n      algorithms: ['HS256'],\n    }),\n  ],\n})\nclass JwtServer {}\n"})}),"\n",(0,i.jsx)(n.h2,{id:"bearer-token-oauth",children:"Bearer Token (OAuth)"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-typescript",children:"import { bearerAuth } from '@mcpkit-dev/core';\n\n@MCPServer({\n  name: 'oauth-server',\n  version: '1.0.0',\n  middleware: [\n    bearerAuth({\n      validate: async (token) => {\n        const result = await oauthServer.introspect(token);\n        return {\n          valid: result.active,\n          principal: { userId: result.sub },\n          roles: result.scope?.split(' '),\n        };\n      },\n    }),\n  ],\n})\nclass OAuthServer {}\n"})}),"\n",(0,i.jsx)(n.h2,{id:"requireauth-decorator",children:"@RequireAuth Decorator"}),"\n",(0,i.jsx)(n.p,{children:"Protect individual tools and resources:"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-typescript",children:"import { RequireAuth } from '@mcpkit-dev/core';\n\n@Tool({ description: 'Admin operation' })\n@RequireAuth({ roles: ['admin'] })\nasync adminTool(@Param({ name: 'data' }) data: string) {\n  return 'Admin only';\n}\n\n@Tool({ description: 'Premium feature' })\n@RequireAuth({\n  validate: (auth) => auth.claims?.subscription === 'premium',\n  message: 'Premium subscription required',\n})\nasync premiumTool(@Param({ name: 'data' }) data: string) {\n  return 'Premium content';\n}\n"})})]})}function l(e={}){const{wrapper:n}={...(0,a.R)(),...e.components};return n?(0,i.jsx)(n,{...e,children:(0,i.jsx)(u,{...e})}):u(e)}},8453(e,n,t){t.d(n,{R:()=>o,x:()=>s});var r=t(6540);const i={},a=r.createContext(i);function o(e){const n=r.useContext(a);return r.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function s(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(i):e.components||i:o(e.components),r.createElement(a.Provider,{value:n},e.children)}}}]);