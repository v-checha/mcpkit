"use strict";(globalThis.webpackChunkmcpkit_docs=globalThis.webpackChunkmcpkit_docs||[]).push([[852],{6432(e,r,n){n.r(r),n.d(r,{assets:()=>c,contentTitle:()=>i,default:()=>p,frontMatter:()=>a,metadata:()=>s,toc:()=>l});const s=JSON.parse('{"id":"api/decorators","title":"Decorators","description":"Class Decorators","source":"@site/docs/api/decorators.md","sourceDirName":"api","slug":"/api/decorators","permalink":"/mcpkit/docs/api/decorators","draft":false,"unlisted":false,"editUrl":"https://github.com/v-checha/mcpkit/tree/main/docs/docs/api/decorators.md","tags":[],"version":"current","sidebarPosition":1,"frontMatter":{"sidebar_position":1},"sidebar":"tutorialSidebar","previous":{"title":"Health Checks","permalink":"/mcpkit/docs/observability/health-checks"},"next":{"title":"Types","permalink":"/mcpkit/docs/api/types"}}');var t=n(4848),o=n(8453);const a={sidebar_position:1},i="Decorators",c={},l=[{value:"Class Decorators",id:"class-decorators",level:2},{value:"@MCPServer",id:"mcpserver",level:3},{value:"TypeScript Typing",id:"typescript-typing",level:4},{value:"Factory Functions",id:"factory-functions",level:2},{value:"createServer",id:"createserver",level:3},{value:"Method Decorators",id:"method-decorators",level:2},{value:"@Tool",id:"tool",level:3},{value:"@Resource",id:"resource",level:3},{value:"@Prompt",id:"prompt",level:3},{value:"@RequireAuth",id:"requireauth",level:3},{value:"@Traced",id:"traced",level:3},{value:"@Monitor",id:"monitor",level:3},{value:"@Debug",id:"debug",level:3},{value:"Parameter Decorators",id:"parameter-decorators",level:2},{value:"@Param",id:"param",level:3}];function d(e){const r={a:"a",code:"code",h1:"h1",h2:"h2",h3:"h3",h4:"h4",header:"header",p:"p",pre:"pre",strong:"strong",...(0,o.R)(),...e.components};return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(r.header,{children:(0,t.jsx)(r.h1,{id:"decorators",children:"Decorators"})}),"\n",(0,t.jsx)(r.h2,{id:"class-decorators",children:"Class Decorators"}),"\n",(0,t.jsx)(r.h3,{id:"mcpserver",children:"@MCPServer"}),"\n",(0,t.jsxs)(r.p,{children:["Marks a class as an MCP server. This decorator adds ",(0,t.jsx)(r.code,{children:"listen()"}),", ",(0,t.jsx)(r.code,{children:"close()"}),", and ",(0,t.jsx)(r.code,{children:"isConnected()"})," methods to your class at runtime."]}),"\n",(0,t.jsx)(r.pre,{children:(0,t.jsx)(r.code,{className:"language-typescript",children:"@MCPServer({\n  name: string;\n  version: string;\n  description?: string;\n  capabilities?: { tools?: boolean; resources?: boolean; prompts?: boolean };\n  hooks?: ServerHooks;\n  middleware?: Middleware[];\n  plugins?: Plugin[];\n})\n"})}),"\n",(0,t.jsx)(r.h4,{id:"typescript-typing",children:"TypeScript Typing"}),"\n",(0,t.jsx)(r.p,{children:"Since the decorator adds methods at runtime, TypeScript doesn't automatically know about them. Use one of these approaches:"}),"\n",(0,t.jsx)(r.p,{children:(0,t.jsxs)(r.strong,{children:["Recommended: ",(0,t.jsx)(r.code,{children:"createServer"})," factory"]})}),"\n",(0,t.jsx)(r.pre,{children:(0,t.jsx)(r.code,{className:"language-typescript",children:"import { createServer, MCPServer, Tool, Param } from '@mcpkit-dev/core';\n\n@MCPServer({ name: 'my-server', version: '1.0.0' })\nclass MyServer {\n  @Tool({ description: 'Greet someone' })\n  async greet(@Param({ name: 'name' }) name: string): Promise<string> {\n    return `Hello, ${name}!`;\n  }\n}\n\nconst server = createServer(MyServer);\nawait server.listen();\n"})}),"\n",(0,t.jsx)(r.p,{children:(0,t.jsx)(r.strong,{children:"Alternative: Declaration merging"})}),"\n",(0,t.jsx)(r.pre,{children:(0,t.jsx)(r.code,{className:"language-typescript",children:"import 'reflect-metadata';\nimport { MCPServer, type MCPServerInstance } from '@mcpkit-dev/core';\n\n@MCPServer({ name: 'my-server', version: '1.0.0' })\nclass MyServer {\n  // ... tools, resources, prompts\n}\n\n// Tell TypeScript about runtime methods\ninterface MyServer extends MCPServerInstance {}\n\nconst server = new MyServer();\nawait server.listen();\n"})}),"\n",(0,t.jsxs)(r.p,{children:["See ",(0,t.jsx)(r.a,{href:"/docs/getting-started/quick-start#understanding-server-instantiation",children:"Quick Start"})," for more details."]}),"\n",(0,t.jsx)(r.h2,{id:"factory-functions",children:"Factory Functions"}),"\n",(0,t.jsx)(r.h3,{id:"createserver",children:"createServer"}),"\n",(0,t.jsxs)(r.p,{children:["Creates a properly typed server instance from a class decorated with ",(0,t.jsx)(r.code,{children:"@MCPServer"}),"."]}),"\n",(0,t.jsx)(r.pre,{children:(0,t.jsx)(r.code,{className:"language-typescript",children:"function createServer<T>(\n  ServerClass: new (...args: any[]) => T,\n  ...args: ConstructorParameters<typeof ServerClass>\n): T & MCPServerInstance\n"})}),"\n",(0,t.jsx)(r.p,{children:(0,t.jsx)(r.strong,{children:"Example:"})}),"\n",(0,t.jsx)(r.pre,{children:(0,t.jsx)(r.code,{className:"language-typescript",children:"import { createServer, MCPServer, Tool } from '@mcpkit-dev/core';\n\n@MCPServer({ name: 'my-server', version: '1.0.0' })\nclass MyServer {\n  @Tool({ description: 'Hello' })\n  async hello(): Promise<string> {\n    return 'Hello!';\n  }\n}\n\n// No type assertions needed\nconst server = createServer(MyServer);\nawait server.listen();\nawait server.close();\nconsole.log(server.isConnected()); // false\n"})}),"\n",(0,t.jsx)(r.p,{children:(0,t.jsx)(r.strong,{children:"With constructor arguments:"})}),"\n",(0,t.jsx)(r.pre,{children:(0,t.jsx)(r.code,{className:"language-typescript",children:"@MCPServer({ name: 'db-server', version: '1.0.0' })\nclass DatabaseServer {\n  constructor(private connectionString: string) {}\n}\n\nconst server = createServer(DatabaseServer, 'postgres://localhost/mydb');\n"})}),"\n",(0,t.jsx)(r.h2,{id:"method-decorators",children:"Method Decorators"}),"\n",(0,t.jsx)(r.h3,{id:"tool",children:"@Tool"}),"\n",(0,t.jsx)(r.p,{children:"Exposes a method as an MCP tool."}),"\n",(0,t.jsx)(r.pre,{children:(0,t.jsx)(r.code,{className:"language-typescript",children:"@Tool({\n  description: string;\n  name?: string;\n  schema?: ZodSchema;\n  annotations?: ToolAnnotations;\n})\n"})}),"\n",(0,t.jsx)(r.h3,{id:"resource",children:"@Resource"}),"\n",(0,t.jsx)(r.p,{children:"Exposes a method as an MCP resource."}),"\n",(0,t.jsx)(r.pre,{children:(0,t.jsx)(r.code,{className:"language-typescript",children:"@Resource(uri: string)\n@Resource({\n  uri: string;\n  name?: string;\n  description?: string;\n  mimeType?: string;\n})\n"})}),"\n",(0,t.jsx)(r.h3,{id:"prompt",children:"@Prompt"}),"\n",(0,t.jsx)(r.p,{children:"Exposes a method as an MCP prompt."}),"\n",(0,t.jsx)(r.pre,{children:(0,t.jsx)(r.code,{className:"language-typescript",children:"@Prompt({\n  description: string;\n  name?: string;\n})\n"})}),"\n",(0,t.jsx)(r.h3,{id:"requireauth",children:"@RequireAuth"}),"\n",(0,t.jsx)(r.p,{children:"Protects a method with authentication."}),"\n",(0,t.jsx)(r.pre,{children:(0,t.jsx)(r.code,{className:"language-typescript",children:"@RequireAuth({\n  roles?: string[];\n  claims?: Record<string, unknown>;\n  validate?: (auth: AuthContext) => boolean | Promise<boolean>;\n  message?: string;\n})\n"})}),"\n",(0,t.jsx)(r.h3,{id:"traced",children:"@Traced"}),"\n",(0,t.jsx)(r.p,{children:"Adds distributed tracing to a method."}),"\n",(0,t.jsx)(r.pre,{children:(0,t.jsx)(r.code,{className:"language-typescript",children:"@Traced({\n  name?: string;\n  kind?: 'internal' | 'server' | 'client';\n  attributes?: SpanAttributes;\n  extractAttributes?: (...args) => SpanAttributes;\n  recordResult?: boolean;\n})\n"})}),"\n",(0,t.jsx)(r.h3,{id:"monitor",children:"@Monitor"}),"\n",(0,t.jsx)(r.p,{children:"Adds logging/monitoring to a method."}),"\n",(0,t.jsx)(r.pre,{children:(0,t.jsx)(r.code,{className:"language-typescript",children:"@Monitor({\n  logArgs?: boolean;\n  logResult?: boolean;\n  logDuration?: boolean;\n  logErrors?: boolean;\n  logger?: Logger;\n})\n"})}),"\n",(0,t.jsx)(r.h3,{id:"debug",children:"@Debug"}),"\n",(0,t.jsx)(r.p,{children:"Adds debug logging to a method. Useful for troubleshooting MCP servers running in Claude Desktop."}),"\n",(0,t.jsx)(r.pre,{children:(0,t.jsx)(r.code,{className:"language-typescript",children:"@Debug({\n  enabled?: boolean;\n  level?: 'trace' | 'debug' | 'info' | 'warn' | 'error';\n  logArgs?: boolean;\n  logResult?: boolean;\n  logDuration?: boolean;\n  label?: string;\n  logger?: DebugLogger;\n  sanitize?: (key, value) => unknown;\n})\n"})}),"\n",(0,t.jsx)(r.p,{children:(0,t.jsx)(r.strong,{children:"Basic usage:"})}),"\n",(0,t.jsx)(r.pre,{children:(0,t.jsx)(r.code,{className:"language-typescript",children:"@Tool({ description: 'Add numbers' })\n@Debug()\nasync add(@Param({ name: 'a' }) a: number, @Param({ name: 'b' }) b: number): Promise<number> {\n  return a + b;\n}\n"})}),"\n",(0,t.jsx)(r.p,{children:(0,t.jsx)(r.strong,{children:"With custom file logger:"})}),"\n",(0,t.jsx)(r.pre,{children:(0,t.jsx)(r.code,{className:"language-typescript",children:"import { configureDebug, type DebugLogger, type DebugLevel } from '@mcpkit-dev/core';\nimport { appendFileSync } from 'fs';\n\nconst fileLogger: DebugLogger = {\n  log(level: DebugLevel, message: string, data?: Record<string, unknown>): void {\n    const logLine = JSON.stringify({ timestamp: new Date().toISOString(), level, message, ...data }) + '\\n';\n    appendFileSync('./logs/mcp-server.log', logLine);\n  },\n};\n\nconfigureDebug({ enabled: true, logger: fileLogger });\n"})}),"\n",(0,t.jsxs)(r.p,{children:["See ",(0,t.jsx)(r.a,{href:"/docs/observability/debugging",children:"Debugging Guide"})," for complete examples including file logging setup."]}),"\n",(0,t.jsx)(r.h2,{id:"parameter-decorators",children:"Parameter Decorators"}),"\n",(0,t.jsx)(r.h3,{id:"param",children:"@Param"}),"\n",(0,t.jsx)(r.p,{children:"Defines a tool or prompt parameter."}),"\n",(0,t.jsx)(r.pre,{children:(0,t.jsx)(r.code,{className:"language-typescript",children:"@Param({\n  name?: string;\n  description?: string;\n  schema?: ZodSchema;\n  optional?: boolean;\n})\n"})})]})}function p(e={}){const{wrapper:r}={...(0,o.R)(),...e.components};return r?(0,t.jsx)(r,{...e,children:(0,t.jsx)(d,{...e})}):d(e)}},8453(e,r,n){n.d(r,{R:()=>a,x:()=>i});var s=n(6540);const t={},o=s.createContext(t);function a(e){const r=s.useContext(o);return s.useMemo(function(){return"function"==typeof e?e(r):{...r,...e}},[r,e])}function i(e){let r;return r=e.disableParentContext?"function"==typeof e.components?e.components(t):e.components||t:a(e.components),s.createElement(o.Provider,{value:r},e.children)}}}]);